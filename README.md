# The No Yoke Times

Some simple data analysis of (fake or real) news articles.

## Installation

To build the project use

```shell script
python -m build
```

in the root directory (i.e., the directory where `pyproject.toml` and `setup.cfg` live).

After building the package you can install it with pip:

```shell script
pip install dist/nytext-0.0.1-py3-none-any.whl
```

To install the package so that it can be used for development purposes
install it with

```shell script
pip install -e .
```

in the root directory.

## Configuration

The project looks for a config file named `~/.nyt.json` containing nested JSON
directories with (at least) the following keys:

```json
{
  "nytext": {
    "app-id": "xxx",
    "api-key": "yyy",
    "data-dir": "path-to-directory-where-data-for-local-analysis-can-be-stored",
    "news-dir": "path-to-directory-where-data-for-the-local-server-can-be-stored",
    "url": "https://api.nytimes.com/svc/archive/v1/{year}/{month}.json"
  }
}
```

## Downloading data from a remote server

See `nytext --help`. In particular

```shell script
nytext download-data
```

downloads a Json file with data from the server `url` in the config file for
local analysis.


```shell script
nytext download-archives
```

downloads data from the remote server into the directory where the local server
expects it. (You probably want to define the `news-dir` entry in the
configuration file for this, otherwise the program tries to write the data into
the `nytext` installation directory, which may not worked for installed builds.)

## Extracting some information from the downloaded data

This is best done inside a Python shell or notebook. Import the module
`nytext.analysis` and call some of the functions defined there. Look into the
module for examples. They are in the cells guarded with `session.is_interactive`
or inside calls to  `(p)print_interactive()`.

## Running a local server

*All the news. None of the facts.*

To make this example more useful as training aid for software developers we provide a
simple server that can serve local JSON files via a web API.

The data files for that server contained in this repository contain "news articles"
generated by language models, since we cannot use real news articles for obvious
licensing reasons. *All the news included in this repository and served by the local
server by default is therefore fake news.*


Run the server in development mode with

```shell
uvicorn nytext.server:app --reload
```

Send a GET request to `http://localhost:8000/docs` to get the OpenAPI
documentation of the service.

Send a GET request to `http://localhost:8000/` to get a "status message".

## Accessing an external news-provider

The Web API used to retrieve articles is modeled after the [New York Times
API](https://developer.nytimes.com/). By pointing the URL to the New York Times server
you might get more relevant analysis results than by using the built-in fake news
provider.
